"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[285],{285:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(5048),a=t(1614),i=t(9658),o=t(7317),c=t(890),s=t(9953),l=t(9877),d=t(2419),u=t(5193),h=t(1413),m=t(9439),x=t(2791),Z=t(4554),f=t(3044),v=t(3239),j=t(7665),p=t(4518),b=t(8535),g=t(1286),y=t(8518),w=t(6727),C=t(6546),k=t(6351),L=t(7748),A=t(3329);function _(){var e=(0,r.v9)(k.tU),n=(0,r.v9)(k.rn),t=(0,x.useState)({name:!0,number:!0}),i=(0,m.Z)(t,2),o=i[0],c=i[1],s=(0,L.Jx)().data,l=(0,L.Tn)(),d=(0,m.Z)(l,2),u=d[0],_=d[1].isLoading,S=(0,L.i)(),P=(0,m.Z)(S,2),D=P[0],I=P[1].isLoading,W=_||I,z=(0,r.I0)(),F="new",N="edit",T=function(e){return s.find((function(n){return n.id===e}))},E=(0,x.useState)(n?T(n).name:""),J=(0,m.Z)(E,2),$=J[0],q=J[1],M=(0,x.useState)(n?T(n).number:""),Y=(0,m.Z)(M,2),B=Y[0],G=Y[1],K=(0,w.Z_)().matches(/^[a-zA-Z\u0430-\u044f\u0456\u0457\u0454\u0491\u0410-\u042f\u0406\u0407\u0404\u0490]+([' -][a-zA-Z\u0430-\u044f\u0456\u0457\u0454\u0491\u0410-\u042f\u0406\u0407\u0404\u0490]*)*$/).max(35),R=(0,w.Z_)().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/).max(20),U=function(e){var n=e.currentTarget,t=n.name,r=n.value;switch(t){case"name":K.validate(r).then((function(){return c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{name:!0})}))})).catch((function(){return c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{name:!1})}))})),q(r);break;case"number":R.validate(r).then((function(){return c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{number:!0})}))})).catch((function(){return c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{number:!1})}))})),G(r);break;default:throw new Error("unsupported input name")}};return(0,A.jsx)(a.Z,{maxWidth:"xs",sx:{my:4},children:(0,A.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,A.jsx)(f.Z,{sx:{m:1,bgcolor:"secondary.main"},children:W?(0,A.jsx)(v.Z,{size:24,color:"inherit"}):e===N?(0,A.jsx)(g.Z,{}):(0,A.jsx)(b.Z,{})}),(0,A.jsxs)(Z.Z,{sx:{textAlign:"center"},component:"form",onSubmit:function(t){t.preventDefault();var r=t.currentTarget.elements,a=r.name.value,i=r.number.value;if(o.name)if(o.number){if(e===F){if(s.some((function(e){return e.name.toLowerCase()===a.toLowerCase()})))return void(0,y.yv)("".concat(a," is already in contacts"),{variant:"warning"});u({name:a,number:i}).then((function(e){var n=e.data;z((0,C.dL)()),(0,y.yv)("Contact ".concat(n.name," added"),{variant:"success"})})).catch((function(){return(0,y.yv)("Something went wrong",{variant:"error"})}))}e===N&&D([n,{name:a,number:i}]).then((function(e){var n=e.data;z((0,C.dL)()),(0,y.yv)("Contact ".concat(n.name," edited"),{variant:"success"})})).catch((function(){return(0,y.yv)("Something went wrong",{variant:"error"})}))}else(0,y.yv)("Please enter the correct number",{variant:"error"});else(0,y.yv)("Please enter the correct name",{variant:"error"})},children:[(0,A.jsx)(j.Z,{fullWidth:!0,margin:"normal",label:"Name",type:"text",name:"name",value:$,error:!o.name,title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,autoFocus:!0,onChange:U}),(0,A.jsx)(j.Z,{fullWidth:!0,margin:"normal",label:"Number",type:"tel",name:"number",value:B,error:!o.number,title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:U}),(0,A.jsx)(p.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:W,children:e===F?"Add new contact":"Save contact"})]})," ",(0,A.jsx)(p.Z,{type:"button",fullWidth:!0,variant:"outlined",sx:{mb:2},onClick:function(){return z((0,C.dL)())},children:"Cancel"})]})})}var S=t(493),P=t(5021),D=t(3768),I=t(3400),W=t(6278),z=t(653),F=t(9900),N=t(8619),T=t(7247);function E(e){var n=e.name,t=e.number,a=e.id,i=(0,L.Nt)(),o=(0,m.Z)(i,2),c=o[0],s=o[1].isLoading,l=(0,r.I0)();return(0,A.jsx)(P.ZP,{sx:{pr:"96px",pl:0},secondaryAction:(0,A.jsxs)(Z.Z,{sx:{display:"flex",gap:"10px"},children:[(0,A.jsx)(D.Z,{title:"Edit",children:(0,A.jsx)(I.Z,{"aria-label":"edit",onClick:function(){return l((0,C.$8)(a))},children:(0,A.jsx)(g.Z,{})})}),(0,A.jsx)(D.Z,{title:"Delete",children:(0,A.jsx)(I.Z,{edge:"end","aria-label":"delete",disabled:s,onClick:function(){return c(a).then((function(e){var n=e.data;(0,y.yv)("Contact ".concat(n.name," deleted"),{variant:"info"})})).catch((function(){return(0,y.yv)("Something went wrong",{variant:"error"})}))},children:s?(0,A.jsx)(v.Z,{size:24}):(0,A.jsx)(T.Z,{})})})]}),children:(0,A.jsxs)(W.Z,{href:"tel:".concat(t),sx:{p:0},children:[(0,A.jsx)(z.Z,{children:(0,A.jsx)(f.Z,{children:(0,A.jsx)(N.Z,{})})}),(0,A.jsx)(F.Z,{primary:"".concat(n),secondary:"".concat(t)})]})})}function J(){var e=(0,L.Jx)().data,n=void 0===e?[]:e,t=(0,r.v9)(k.AD),a=n.filter((function(e){return e.name.toLowerCase().includes(t)}));return(0,A.jsx)(S.Z,{children:a.map((function(e){return(0,A.jsx)(E,(0,h.Z)({},e),e.id)}))})}var $=t(6895);function q(){var e=(0,r.v9)(k.AD),n=(0,r.I0)();return(0,A.jsx)(j.Z,{fullWidth:!0,id:"standard-controlled",label:"Find contacts by name",variant:"standard",value:e,onChange:function(e){var t=e.currentTarget.value;n((0,$.T)(t.toLowerCase()))}})}var M=t(4321),Y=t(5289),B=t(7123),G=t(9157),K=t(1691),R=t(5661);function U(){var e=(0,r.v9)(k.R_),n=(0,r.I0)();return(0,A.jsxs)(Y.Z,{open:e,onClose:function(){return n((0,C.gk)())},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,A.jsx)(R.Z,{id:"alert-dialog-title",children:"Are you sure?"}),(0,A.jsx)(G.Z,{children:(0,A.jsx)(K.Z,{id:"alert-dialog-description",children:"\u0421losing the window will delete unsaved data"})}),(0,A.jsxs)(B.Z,{children:[(0,A.jsx)(p.Z,{onClick:function(){return n((0,C.gk)())},children:"No"}),(0,A.jsx)(p.Z,{onClick:function(){n((0,C.gk)()),n((0,C.dL)())},autoFocus:!0,children:"Yes"})]})]})}function V(){var e=(0,r.v9)(k.Vc),n=(0,r.I0)(),t=(0,L.Jx)(),h=t.data,m=void 0===h?[]:h,x=t.isError,Z=t.isLoading,f=(0,u.Z)("(max-width:786px)");return(0,A.jsxs)(a.Z,{component:"main",children:[Z&&(0,A.jsx)(M.Z,{}),x&&(0,A.jsxs)(i.Z,{severity:"error",children:[(0,A.jsx)(o.Z,{children:"Error"}),"Something went wrong. Please reload the page"]}),Z||x||0!==m.length?!Z&&!x&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(c.Z,{align:"center",component:"h1",variant:"h4",children:"Contacts"}),(0,A.jsx)(q,{}),(0,A.jsx)(J,{})]}):(0,A.jsx)(c.Z,{sx:{mt:4},align:"center",variant:"h5",paragraph:!0,children:"Your phone book is empty. Please click the button in the lower right corner and add new contacts."}),(0,A.jsx)(s.ZP,{anchor:f?"top":"bottom",open:e,ModalProps:{onClose:function(e,t){"escapeKeyDown"!==t&&"backdropClick"!==t?(console.log(t),n((0,C.dL)())):n((0,C.G3)())}},children:(0,A.jsx)(_,{})}),(0,A.jsx)(l.Z,{sx:{position:"fixed",bottom:16,right:16},color:"primary","aria-label":"add",onClick:function(){return n((0,C.$A)())},children:(0,A.jsx)(d.Z,{})}),(0,A.jsx)(U,{})]})}}}]);
//# sourceMappingURL=285.b825f2e7.chunk.js.map